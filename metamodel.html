<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>cSiTra</title>

    <!-- Bootstrap core CSS -->
    <link href="res/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="res/css/sticky-footer-navbar.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <!-- Fixed navbar -->
    <nav class="navbar navbar-inverse">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">cSiTra</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            <li class="active"><a href="index.html">About</a></li>
            <li><a href="#about">Download</a></li>
            <li><a href="team.html">Team</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <!-- Begin page content -->
    <div class="container">
      <div class="row">
        <div class="col-md-9" id="content">
          <h2 id="metamodel">Meta Model</h2>
          <hr>
          <h4 id="sql-metamodel">SQL meta-model</h4>
          <p>The following image represents the SQL meta-model:</p>
          <div class="panel panel-default">
            <div class="panel-body">
              <img src="res/images/sql.PNG">
            </div>
            <div class="panel-footer">SQL meta model</div>
          </div>

          <p>What follows is the description of each element of the model and the model as a whole. A colour scheme is used in this part where <span class="purple">purple</span> represents the parent element and <span class="orange">orange</span> represents the child elements and a <span class="red">red</span> represents the properties of the parent.</p>

          <p>The Key element of this model is a <span class="purple">Database</span>.
          <ul>
            <li>Each <span class="purple">Database</span> has zero or more <span class="orange">Sequences</span> and <span class="orange">Tables</span>, and each <span class="orange">Sequence</span> and <span class="orange">Table</span> belong to exactly one <span class="purple">Database</span>. If <span class="purple">Database</span> is removed, so are all of its <span class="orange">Sequences</span> and <span class="orange">Tables</span>.</li>
            <li>Each <span class="orange">Database</span> has a property that represents its <span class="red">name (Datatype: String)</span>.</li>
          </ul> 
          <br>

          <p><span class="purple">Sequences</span>: are a feature of some database products which just creates unique values. It just increments a value and returns it.</p>
          <ul>
            <li>Each <span class+"purple">Sequences</span> has a property that represents its <span class="red">name (Datatype: String)</span>.</li>
            <li>A property <span class="red">minValue (Datatype: int)</span>.</li>
            <li>A property <span class="red">maxValue (Datatype: long)</span>.</li>
            <li>A property <span class="red">incrementBy (Datatype: int)</span>.</li>
            <li>A property <span class="red">startWith (Datatype: long)</span>.</li>
            <li>A property <span class="red">curentValue (Datatype: long)</span>.</li>
            <li>A property <span class="red">cycle (Datatype: boolean)</span>.</li>
          </ul>
          <br>

          <p><span class="purple">Table</span>: is data structure which has some properties and stores values in form of rows and columns</p>
          <ul>
            <li>Each <span class="purple">Table</span> belongs to exactly to one Database and has zero or more <span class="orange">Constraints</span> and <span class="orange">Rows</span>, and each of these <span class="orange">Constraint</span> and <span class="orange">Row</span> belong to exactly that one <span class="purple">Table</span>. If <span class="purple">Table</span> is removed, so are all of its <span class="orange">Constraints</span> and <span class="orange">Rows</span>.</li>
            <li>Additionally each <span class="purple">Table</span> has one or more <span class="orange">Columns</span>, and each of these <span class="orange">Column</span> belong to exactly that one <span class="purple">Table</span>. If <span class="purple">Table</span> is removed, so are all of its <span class="orange">Columns</span>.</li>
            <li>Each <span class="purple">Table</span> has a property that represents its <span class="red">name (Datatype: String)</span>.</li>     
          </ul>
          <br>

          <p><span class="purple">Row</span>: represents a single, implicitly structured data item in a Table.</p>
          <ul>
            <li>Each <span class="purple">Row</span> belongs to exactly to one Table and has zero or more <span class="orange">Cells</span>, and each of these <span class="orange">Cells</span> belong to exactly that one <span class="purple">Row</span>. If <span class="purple">Row</span> is removed, so are all of its <span class="orange">Cells</span>.</li>        
          </ul>
          <br>

          <p><span class="purple">Constraints</span>: are used to specify rules for the data in a Table.</p>
          <ul>
            <li>Each <span class="purple">Constraint</span> belongs to exactly to one Table and has zero or more <span class="orange">Columns</span> associated to it, and each of these <span class="orange">Columns</span> may or may not refer the <span class="purple">Constraint</span> </li>
            <li>Each <span class="purple">Constraint</span> has a property that represents its <span class="red">name (Datatype: String)</span>.</li>
            <li>A property that represents its <span class="red">type (Datatype: enum-ConstraintType)</span>.</li>
            <li>And a property that refers the columns to which it is associated with presents called  <span class="red">reference (Datatype: String)</span>.</li>
          </ul>
          <br>

          <p><span class="purple">Columns</span>: are a set of data values of a particular simple type, one for each Row of the Table. They provide the structure according to which the Rows are composed.</p>
          <ul>
            <li>Each <span class="purple">Column</span> belongs to exactly to one Table and has at least one <span class="orange">Cell</span> If <span class="purple">Column</span> is removed, so are all of its <span class="orange">Cells</span>.</li>
            <li>Additionally each <span class="purple">Column</span> has zero or more <span class="orange">Constraints</span>, and each of these <span class="orange">Constraint</span> belong to exactly that one <span class="purple">Column</span>. If <span class="purple">Column</span> is removed, so are all of its <span class="orange">Constraints</span>.</li>
            <li>Each <span class="purple">Column</span> has a property that represents its <span class="red">name (Datatype: String)</span>.</li>
            <li>A property that represents its <span class="red">type (Datatype: enum-DataType)</span>.</li>
            <li>A property that represents its <span class="red">size (Datatype: String)</span>.</li>
            <li>And a property that represents if it is a null called <span class="red">nullable (Datatype: boolean)</span>.</li>
          </ul>
          <br>

          <p><span class="purple">Cells</span>: a database table is composed of rows and columns of Cells, they hold the actual data.</p>
          <ul>
            <li>Each <span class="purple">Cell</span> belongs to exactly to one Row and one Column of a Table.</li>
            <li>Each <span class="purple">Cell</span> has a property to store data called, <span class="red">value (Datatype: String)</span>.</li>
          </ul>
          <br>

          <h4 id="nosql-metamodel">Cassandra meta-model</h4>
          <p>The following image represents the Cassandra (NoSQL) meta-model:</p>
          <div class="panel panel-default">
            <div class="panel-body">
              <img src="res/images/nosql.PNG">
            </div>
            <div class="panel-footer">Cassandra meta model</div>
          </div>
          <p>What follows is the description of each element of the model and the model as a whole. A colour scheme is used in this part where <span class="purple">purple</span> represents the parent element and <span class="orange">orange</span> represents the child elements and a <span class="red">red</span> represents the properties of the parent.</p>

          <p>The Key element of this model is a <span class="purple">KeySpace</span> (which is the container for your application data).</p> 
          <ul>
            <li>Each <span class="purple">KeySpace</span> has zero or more <span class="orange">Indexes</span> and <span class="orange">Options</span>, and each <span class="orange">Index</span> and <span class="orange">Option</span> belong to exactly one <span class="purple">KeySpace</span>. If <span class="purple">KeySpace</span> is removed, so are all of its <span class="orange">Indexes</span> and <span class="orange">Options</span>.</li>
            <li>Additionally and more importantly each <span class="purple">KeySpace</span> has one or more, and each <span class="orange">ColumnFamily</span> belong to exactly one <span class="purple">KeySpace</span>. If <span class="purple">KeySpace</span> is removed, so are all of its ColumnFamilies.</li>
            <li>Each <span class="purple">KeySpace</span> has a property that represents its <span class="red">name (Datatype: String)</span>.</li>
          </ul>
          <br>

          <p><span class="purple">ColumnFamily</span>: is a NoSQL object that contains columns of related data. It is a tuple (pair) that consists of a key-value pair, where the key is mapped to a value that is a set of columns. In analogy with relational databases, a standard column family is as a "table"</p>
          <ul>
            <li>Each <span class="purple">ColumnFamily</span> belongs to exactly to one KeySpace and has zero or more <span class="orange">PrimaryKeys</span> and <span class="orange">Rows</span>, and each of these PrimaryKey and <span class="orange">Row</span> belong to exactly that one <span class="purple">ColumnFamily</span>. If <span class="purple">ColumnFamily</span> is removed, so are all of its <span class="orange">PrimaryKeys</span> and <span class="orange">Rows</span>.</li>
            <li>Additionally each <span class="purple">ColumnFamily</span> has one or more <span class="orange">Columns</span>, and each of these <span class="orange">Column</span> belong to exactly that one <span class="purple">ColumnFamily</span>. If <span class="purple">ColumnFamily</span> is removed, so are all of its <span class="orange">Columns</span>.</li>
            <li>Each <span class="purple">ColumnFamily</span> has a property that represents its <span class="red">name (Datatype: String)</span>.</li>
            <li>And a property that to add a comment to it called, <span class="red">comment (Datatype: String)</span>.</li>
          </ul>
          <br>

          <p><span class="purple">Row</span>: represents a single, implicitly structured data item in a ColumnFamily.</p>
          <ul>
            <li>Each <span class="purple">Row</span> belongs to exactly to one ColumnFamily and has zero or more <span class="orange">Cells</span>, and each of these <span class="orange">Cells</span> belong to exactly that one <span class="purple">Row</span>. If <span class="purple">Row</span> is removed, so are all of its <span class="orange">Cells</span>.</li>
          </ul>
          <br>

          <p><span class="purple">PrimaryKeys</span>: are used to specify primary keys of a ColumnFamily.</p>
          <ul>
            <li>Each <span class="purple">PrimaryKey</span> belongs to exactly to one ColumnFamily and has zero or more <span class="orange">Columns</span> associated to it. </li>
          </ul>
          <br>

          <p><span class="purple">Columns</span>: in Cassandra a column is a pair of name and data values of a particular simple type, one for each Row of the ColumnFamily.</p>
          <ul>
            <li>Each <span class="purple">Column</span> belongs to exactly to one <span class="purple">Column</span>Family and has at least one <span class="orange">Cell</span>. If <span class="purple">Column</span> is removed, so are all of its <span class="orange">Cells</span>.</li>
            <li>Additionally each <span class="purple">Column</span> may or may not be a PrimaryKey.</li>
            <li>Each <span class="purple">Column</span> has a property that represents its <span class="red">name (Datatype: String)</span>.</li>
            <li>A property that represents its <span class="red">datatype (Datatype: enum-Type)</span>.</li>
            <li>A property that represents its <span class="red">size (Datatype: String)</span>.</li>
          </ul>
          <br>

          <p><span class="purple">Cells</span>: is an entity they hold the actual data.</p>
          <ul>
            <li>Each <span class="purple">Cell</span> belongs to exactly to one Row and one Column of a ColumnFamily.</li>
            <li>Each <span class="purple">Cell</span> has a property to store data called, <span class="red">value (Datatype: String)</span>.</li>
          </ul>
          <br>

          <p><span class="purple">Index</span>: A key index, speeds up random access to data in the ColumnFamily. In Cassandra, the primary index for a column family is the index of its row keys.</p>
          <ul>
            <li>Each <span class="purple">Index</span> belongs to exactly to one KeySpace.</li>
            <li>Each <span class="purple">Index</span> has a property to represent its <span class="red">name (Datatype: String)</span>.</li>
            <li>And a property that refers the columns to which it is associated with presents called <span class="red">reference (Datatype: String)</span>.</li>
          </ul>  

          <h3 id="transformation">Transformation rules</h3>
          <hr>
          <p>Basically a <strong>transformation rule</strong> is, the principle in logic establishing the conditions under which one statement can be derived or validly deduced from one or more other statements especially in a formalized language.<p>

          <p><strong>SiTra</strong> is a simple Java library for supporting a programming approach to writing transformations aiming to, firstly use Java for writing transformations, and secondly, to provide a minimal framework for the execution of transformations. SiTra consists of two interfaces and a class that implements a transformation algorithm. The aim is to facilitate a style of programming that incorporates the concept of transformation rules.</p>

          <p><strong>Transformer</strong> – the primary transformation object; it contains a collection of rules, and manages the process of transforming source model objects into target model objects.</p>

          <p><strong>Rule</strong> – a rule deals with specific detail of how to map an object from a source model into an object of the target model. One or more rules may or may be applicable for the same type of object and it is necessary to have a means to determine the applicability of a rule for a specific object, not just its type.</p>

          <p>These are the rules to be followed to convert SQL to Cassandra:</p><br>

          <h4 id="Database2Keyspace"><code>Database2Keyspace</code> (Database to Keyspace)</h4>
          <ul>
            <li>This rule applies to the SQL database’s schema and to the Cassandra’s Keyspace.</li>
            <li>This rule takes the Database object and copies its schema name, and creates a new keyspace object with the same name as the SQL Database Schema.</li>
          </ul>
          <br>

          <h4 id="Table2ColumnFamily"><code>Table2ColumnFamily</code> (Tables to ColumnFamily)</h4>
          <ul>
            <li>This rule applies to the SQL table and to the Cassandra’s column family.</li>
            <li>This rule, for each table in the SQL, takes the table object and creates a column family, in the keyspace, with the same name as the table.</li>
            <li>It adds any options to the table if specified.</li>
          </ul>
          <br>

          <h4 id="SqlCol2NoSqlCol"><code>SqlCol2NoSqlCol</code> (SQL Column to NoSQL Column)</h4>
          <ul>
            <li>This rule applies to the SQL columns and to the Cassandra columns.</li>
            <li>This rule applies to each column present in the SQL table object, and it takes a column object and creates a Cassandra column object with the same name.</li>
            <li>The following table represents the list of SQL Data types and the corresponding NoSQL Data types to which they are mapped.</li>
            <img src="res/images/datatype-mapping.png"/>
            <li>If the size parameter is present for the SQL column object same value is applied for the Cassandra column.</li>
            <li>If the table has a constraint of type PRIMARY or COMPOSITE_PRIMARY then create a PrimaryKey for the column family with the reference of the column(s) object.</li>
            <li>A special case to be considered is, If the table has a constraint of type FOREIGN, then:</li>
              <ul>
                <li>Create a column family for each foreign key instance (called the reference column family).</li>
                <li>Each column family has the primary key as referred table's primary key and the consequent columns are the referee table's primary key.</li>
              </ul>
          </ul>
          <br>

          <h4 id="SQLCons2NoSQLCons"><code>SQLCons2NoSQLCons</code> (SQL Constraint to NoSQL Constraint)</h4>
          <ul>
            <li>This rule applies to the SQL’s Constraints and to the Cassandra’s Constraints.</li>
            <li>This rule applies to each constraint object present in the SQL table, and it takes the Constraint object and checks if the constraint is primary key constraint if yes, it creates a Cassandra primary key object.</li>
          </ul>
          <br>

          <h4 id="SQLCell2NoSQLCell"><code>SQLCell2NoSQLCell</code> (SQL Cell to NoSQL Cell)</h4>
          <ul>
            <li>This rule applies to the SQL’s Cells and to the Cassandra’s Cells.</li>
            <li>This rule applies to each cell object present in the SQL table, and it takes the cell object and copies the value of the cell, and it creates a Cassandra cell object with the same value.</li>
          </ul>
          <br>

          <h4 id="reading-data">Reading data</h4>
          <ul>
            <li>Read metadata of the current SQL Database.</li>
            <li>Appropriately the objects for database, columns and constraints.</li>
            <li>Read database to fetch data and store as following:</li>
              <ul>
                <li>Create a row object for each entry.</li>
                <li>Create a cell object for each for that entry passing the column object name and the value.</li>
                <li>Add the cell object to the list of cells in the row.</li>
              </ul>
          </ul>
          <br>

          <h4 id="transfer-data">Transferring data</h4>
          <ul>
            <li>Create a Row object using the current column family.</li>
            <li>Create additional column(s) if required. Use uuid or timeuuid in the name to differentiate between same name columns.</li>
            <li>Create a cell object for every entry in the row using the value. </li>
            <li>Add the cells in the list of cells in the row.</li>
            <li>If the current row entry is from a column family or table that has a constraint of type FOREIGN, then:</li>
              <ul>
                <li>Add a column in the row of the reference column family in which the Primary key is the referred value. Add the timestamp, or timeuuid in the column name to differentiate it.</li>
                <li>Create the cell with the above column object and put the Primary Key of the current column family’s row.</li>
                <li>Add the cell to the reference table’s row.</li>

              </ul>
          </ul>
      	</div>
	      <div class="col-md-3" id="sidebar">
          <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix">
            <ul class="nav bs-docs-sidenav">
              <li><a href="index.html">Background</a></li>
              <li class="active">
                <a href="metamodel.html">Meta-model</a>
                <ul class="nav">
                  <li><a href="metamodel.html#sql-metamodel">SQL Meta-model</a></li>
                  <li><a href="metamodel.html#nosql-metamodel">NoSQL Meta-model</a></li>
                </ul>
              </li>
              <li>
                <a href="transformation.html">Transformation rules</a>
                <ul class="nav">
                  <li><a href="transformation.html#Database2Keyspace">Database to Keyspace</a></li>
                  <li><a href="transformation.html#Table2ColumnFamily">Tables to ColumnFamily</a></li>
                  <li><a href="transformation.html#SqlCol2NoSqlCol">SQL Column to NoSQL Column</a></li>
                  <li><a href="transformation.html#SQLCons2NoSQLCons">SQL Constraint to NoSQL Constraint</a></li>
                  <li><a href="transformation.html#SQLCell2NoSQLCell">SQL Cell to NoSQL Cell</a></li>
                  <li><a href="transformation.html#reading-data">Reading data</a></li>
                  <li><a href="transformation.html#transfer-data">Transferring data</a></li>
                </ul>
              </li>  
            </ul>
          </nav>
        </div>
      </div>
      <!--
      <p class="lead">Pin a fixed-height footer to the bottom of the viewport in desktop browsers with this custom HTML and CSS. A fixed navbar has been added with <code>padding-top: 60px;</code> on the <code>body > .container</code>.</p>
      <p>Back to <a href="../sticky-footer">the default sticky footer</a> minus the navbar.</p>
      -->
    </div>

    <!--
    <footer class="footer">
      <div class="container">
        <p class="text-muted">Place sticky footer content here.</p>
      </div>
    </footer>
    -->

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="res/js/bootstrap.min.js"></script>
  </body>
</html>
